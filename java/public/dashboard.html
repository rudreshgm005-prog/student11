<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f6f9;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: #343a40;
            color: #fff;
            display: flex;
            flex-direction: column;
            transition: all 0.3s;
        }

        .sidebar-header {
            padding: 20px;
            text-align: center;
            background-color: #212529;
            border-bottom: 1px solid #4b545c;
        }

        .sidebar-header .logo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 10px;
        }

        .sidebar-header h3 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .nav-menu {
            list-style: none;
            padding: 0;
            margin: 20px 0;
            flex-grow: 1;
        }

        .nav-menu li a {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            color: #c2c7d0;
            text-decoration: none;
            transition: 0.3s;
            border-left: 3px solid transparent;
        }

        .nav-menu li a:hover, .nav-menu li a.active {
            background-color: #495057;
            color: #fff;
            border-left-color: #007bff;
        }

        .nav-menu li a i {
            margin-right: 15px;
            width: 20px;
            text-align: center;
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .top-bar {
            background-color: #fff;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .top-bar h1 {
            margin: 0;
            font-size: 1.5rem;
            color: #333;
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logout-btn {
            padding: 8px 16px;
            background-color: #dc3545;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.9rem;
            transition: background 0.3s;
        }

        .logout-btn:hover {
            background-color: #c82333;
        }

        .dashboard-container {
            padding: 30px;
        }

        /* Stats Cards */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .stat-info h3 {
            margin: 0;
            font-size: 1.8rem;
            color: #333;
        }

        .stat-info p {
            margin: 5px 0 0;
            color: #6c757d;
            font-size: 0.9rem;
        }

        .stat-icon {
            font-size: 2.5rem;
            color: #e9ecef;
        }

        .stat-card.blue .stat-icon { color: #007bff; }
        .stat-card.green .stat-icon { color: #28a745; }
        .stat-card.orange .stat-icon { color: #fd7e14; }
        .stat-card.purple .stat-icon { color: #6f42c1; }

        /* Course List Override */
        .section-title {
            margin-bottom: 20px;
            color: #333;
            border-bottom: 2px solid #007bff;
            display: inline-block;
            padding-bottom: 5px;
        }

        .course-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .course-card {
            background: #fff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            border-top: 4px solid #007bff;
            font-weight: bold;
            font-size: 1.1rem;
            color: #495057;
            text-decoration: none;
        }

        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }

        #courseSearch {
            padding: 10px 15px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            font-size: 0.9rem;
            outline: none;
        }

        #courseSearch:focus {
            border-color: #007bff;
        }

        /* New Styles for SPA Sections */
        .content-section {
            display: none;
            animation: fadeIn 0.4s ease-in-out;
        }
        .content-section.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Profile Photo Styles */
        .profile-pic-small {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
            border: 2px solid #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* Assignment Styles */
        .assignment-card {
            background: #fff;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-left: 5px solid #007bff;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .status-badge { padding: 5px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: bold; }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-completed { background: #d4edda; color: #155724; }

        /* Settings Styles */
        .settings-container { background: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); max-width: 600px; }
        .profile-edit { display: flex; align-items: center; gap: 20px; margin-bottom: 20px; }
        .profile-pic-large { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid #007bff; }
        .chart-container {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            height: 400px;
        }

        /* Table Styles */
        .table-container {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            overflow-x: auto;
        }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #f8f9fa; font-weight: 600; color: #333; }

        /* Progress Bar Styles */
        .progress-container {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 4px;
            margin-top: 15px;
            height: 8px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: #28a745;
            border-radius: 4px;
        }
        .progress-text {
            display: block;
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 5px;
            font-weight: normal;
        }
    </style>
</head>

<body>

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <img src="/kle.jpg" class="logo" alt="Portal Logo" id="sidebarLogo">
            <h3>Student Portal</h3>
        </div>
        <ul class="nav-menu">
            <li><a href="#" class="nav-link active" onclick="showSection('dashboard', this)"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
            <li><a href="#" class="nav-link" onclick="showSection('courses', this)"><i class="fas fa-book-open"></i> My Courses</a></li>
            <li><a href="#" class="nav-link" onclick="showSection('assignments', this)"><i class="fas fa-tasks"></i> Assignments</a></li>
            <li><a href="#" class="nav-link" onclick="showSection('grades', this)"><i class="fas fa-chart-bar"></i> Grades</a></li>
            <li><a href="#" class="nav-link" onclick="showSection('attendance', this)"><i class="fas fa-calendar-check"></i> Attendance</a></li>
            <li><a href="#" class="nav-link" onclick="showSection('settings', this)"><i class="fas fa-cog"></i> Settings</a></li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="top-bar">
            <h1>Dashboard Overview</h1>
            <div class="user-actions">
                <div class="user-profile">
                    <img src="https://via.placeholder.com/150" alt="Profile" class="profile-pic-small" id="headerProfilePic">
                    <span>Welcome, Student</span>
                </div>
                <a href="/logout" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </div>
        </div>

        <div class="dashboard-container">
            
            <div id="dashboard" class="content-section active">
            <!-- Statistics Widgets -->
            <div class="stats-container">
                <div class="stat-card blue">
                    <div class="stat-info">
                        <h3>5</h3>
                        <p>Active Courses</p>
                    </div>
                    <div class="stat-icon"><i class="fas fa-graduation-cap"></i></div>
                </div>
                <div class="stat-card green">
                    <div class="stat-info">
                        <h3>85%</h3>
                        <p>Attendance</p>
                    </div>
                    <div class="stat-icon"><i class="fas fa-user-check"></i></div>
                </div>
                <div class="stat-card orange">
                    <div class="stat-info">
                        <h3>3</h3>
                        <p>Pending Tasks</p>
                    </div>
                    <div class="stat-icon"><i class="fas fa-clipboard-list"></i></div>
                </div>
                <div class="stat-card purple">
                    <div class="stat-info">
                        <h3>3.8</h3>
                        <p>CGPA</p>
                    </div>
                    <div class="stat-icon"><i class="fas fa-star"></i></div>
                </div>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 class="section-title" style="margin-bottom: 0;">Available Courses</h2>
                <input type="text" id="courseSearch" placeholder="Search courses..." onkeyup="filterCourses()">
            </div>

            <div class="course-list">
                <a href="#" onclick="openCourse('python'); return false;" class="course-card">
                    <i class="fab fa-python fa-3x" style="color: #3776ab; margin-bottom: 15px; display:block;"></i>
                    Python
                </a>
                <a href="#" onclick="openCourse('c-programming'); return false;" class="course-card">
                    <i class="fas fa-code fa-3x" style="color: #555; margin-bottom: 15px; display:block;"></i>
                    C Programming
                </a>
                <a href="#" onclick="openCourse('java'); return false;" class="course-card">
                    <i class="fab fa-java fa-3x" style="color: #007396; margin-bottom: 15px; display:block;"></i>
                    Java
                </a>
                <a href="#" onclick="openCourse('html'); return false;" class="course-card">
                    <i class="fab fa-html5 fa-3x" style="color: #e34f26; margin-bottom: 15px; display:block;"></i>
                    HTML
                </a>
                <a href="#" onclick="openCourse('css'); return false;" class="course-card">
                    <i class="fab fa-css3-alt fa-3x" style="color: #1572b6; margin-bottom: 15px; display:block;"></i>
                    CSS
                </a>
                <a href="#" onclick="openCourse('javascript'); return false;" class="course-card">
                    <i class="fab fa-js fa-3x" style="color: #f7df1e; margin-bottom: 15px; display:block;"></i>
                    JavaScript
                </a>
                <a href="#" onclick="openCourse('data-structures'); return false;" class="course-card">
                    <i class="fas fa-layer-group fa-3x" style="color: #28a745; margin-bottom: 15px; display:block;"></i>
                    Data Structures
                </a>
                <a href="#" onclick="openCourse('databases'); return false;" class="course-card">
                    <i class="fas fa-database fa-3x" style="color: #007bff; margin-bottom: 15px; display:block;"></i>
                    Databases
                </a>
                <a href="#" onclick="openCourse('operating-systems'); return false;" class="course-card">
                    <i class="fas fa-server fa-3x" style="color: #6c757d; margin-bottom: 15px; display:block;"></i>
                    Operating Systems
                </a>
                <a href="#" onclick="openCourse('computer-networks'); return false;" class="course-card">
                    <i class="fas fa-network-wired fa-3x" style="color: #17a2b8; margin-bottom: 15px; display:block;"></i>
                    Computer Networks
                </a>
                <a href="#" onclick="openCourse('software-engineering'); return false;" class="course-card">
                    <i class="fas fa-cogs fa-3x" style="color: #6f42c1; margin-bottom: 15px; display:block;"></i>
                    Software Engineering
                </a>
                <a href="#" onclick="openCourse('artificial-intelligence'); return false;" class="course-card">
                    <i class="fas fa-brain fa-3x" style="color: #e83e8c; margin-bottom: 15px; display:block;"></i>
                    Artificial Intelligence
                </a>
                <a href="#" onclick="openCourse('machine-learning'); return false;" class="course-card">
                    <i class="fas fa-robot fa-3x" style="color: #20c997; margin-bottom: 15px; display:block;"></i>
                    Machine Learning
                </a>
                <a href="#" onclick="openCourse('web-development'); return false;" class="course-card">
                    <i class="fas fa-laptop-code fa-3x" style="color: #fd7e14; margin-bottom: 15px; display:block;"></i>
                    Web Development
                </a>
            </div>
            </div>

            <!-- My Courses Section -->
            <div id="courses" class="content-section">
                <h2 class="section-title">My Enrolled Courses</h2>
                <div class="course-list">
                    <a href="#" onclick="openCourse('python'); return false;" class="course-card">
                        <i class="fab fa-python fa-3x" style="color: #3776ab; margin-bottom: 15px; display:block;"></i>
                        Python
                        <div class="progress-container"><div class="progress-bar" style="width: 75%;"></div></div>
                        <span class="progress-text">75% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('java'); return false;" class="course-card">
                        <i class="fab fa-java fa-3x" style="color: #007396; margin-bottom: 15px; display:block;"></i>
                        Java
                        <div class="progress-container"><div class="progress-bar" style="width: 60%;"></div></div>
                        <span class="progress-text">60% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('data-structures'); return false;" class="course-card">
                        <i class="fas fa-layer-group fa-3x" style="color: #28a745; margin-bottom: 15px; display:block;"></i>
                        Data Structures
                        <div class="progress-container"><div class="progress-bar" style="width: 45%;"></div></div>
                        <span class="progress-text">45% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('databases'); return false;" class="course-card">
                        <i class="fas fa-database fa-3x" style="color: #007bff; margin-bottom: 15px; display:block;"></i>
                        Databases
                        <div class="progress-container"><div class="progress-bar" style="width: 90%;"></div></div>
                        <span class="progress-text">90% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('web-development'); return false;" class="course-card">
                        <i class="fas fa-laptop-code fa-3x" style="color: #fd7e14; margin-bottom: 15px; display:block;"></i>
                        Web Development
                        <div class="progress-container"><div class="progress-bar" style="width: 30%;"></div></div>
                        <span class="progress-text">30% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('c-programming'); return false;" class="course-card">
                        <i class="fas fa-code fa-3x" style="color: #555; margin-bottom: 15px; display:block;"></i>
                        C Programming
                        <div class="progress-container"><div class="progress-bar" style="width: 80%;"></div></div>
                        <span class="progress-text">80% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('html'); return false;" class="course-card">
                        <i class="fab fa-html5 fa-3x" style="color: #e34f26; margin-bottom: 15px; display:block;"></i>
                        HTML
                        <div class="progress-container"><div class="progress-bar" style="width: 95%;"></div></div>
                        <span class="progress-text">95% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('css'); return false;" class="course-card">
                        <i class="fab fa-css3-alt fa-3x" style="color: #1572b6; margin-bottom: 15px; display:block;"></i>
                        CSS
                        <div class="progress-container"><div class="progress-bar" style="width: 85%;"></div></div>
                        <span class="progress-text">85% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('javascript'); return false;" class="course-card">
                        <i class="fab fa-js fa-3x" style="color: #f7df1e; margin-bottom: 15px; display:block;"></i>
                        JavaScript
                        <div class="progress-container"><div class="progress-bar" style="width: 50%;"></div></div>
                        <span class="progress-text">50% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('operating-systems'); return false;" class="course-card">
                        <i class="fas fa-server fa-3x" style="color: #6c757d; margin-bottom: 15px; display:block;"></i>
                        Operating Systems
                        <div class="progress-container"><div class="progress-bar" style="width: 40%;"></div></div>
                        <span class="progress-text">40% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('computer-networks'); return false;" class="course-card">
                        <i class="fas fa-network-wired fa-3x" style="color: #17a2b8; margin-bottom: 15px; display:block;"></i>
                        Computer Networks
                        <div class="progress-container"><div class="progress-bar" style="width: 20%;"></div></div>
                        <span class="progress-text">20% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('software-engineering'); return false;" class="course-card">
                        <i class="fas fa-cogs fa-3x" style="color: #6f42c1; margin-bottom: 15px; display:block;"></i>
                        Software Engineering
                        <div class="progress-container"><div class="progress-bar" style="width: 65%;"></div></div>
                        <span class="progress-text">65% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('artificial-intelligence'); return false;" class="course-card">
                        <i class="fas fa-brain fa-3x" style="color: #e83e8c; margin-bottom: 15px; display:block;"></i>
                        Artificial Intelligence
                        <div class="progress-container"><div class="progress-bar" style="width: 10%;"></div></div>
                        <span class="progress-text">10% Complete</span>
                    </a>
                    <a href="#" onclick="openCourse('machine-learning'); return false;" class="course-card">
                        <i class="fas fa-robot fa-3x" style="color: #20c997; margin-bottom: 15px; display:block;"></i>
                        Machine Learning
                        <div class="progress-container"><div class="progress-bar" style="width: 5%;"></div></div>
                        <span class="progress-text">5% Complete</span>
                    </a>
                </div>
            </div>

            <!-- Assignments Section -->
            <div id="assignments" class="content-section">
                <h2 class="section-title">Assignments</h2>
                <div id="assignments-list">Loading...</div>
            </div>

            <!-- Grades Section -->
            <div id="grades" class="content-section">
                <h2 class="section-title">Grades</h2>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Course</th>
                                <th>Midterm</th>
                                <th>Final</th>
                                <th>Total</th>
                                <th>Grade</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Python</td><td>85</td><td>90</td><td>88</td><td>A</td></tr>
                            <tr><td>C Programming</td><td>78</td><td>82</td><td>80</td><td>B+</td></tr>
                            <tr><td>Java</td><td>92</td><td>88</td><td>90</td><td>A</td></tr>
                            <tr><td>HTML</td><td>95</td><td>94</td><td>95</td><td>A+</td></tr>
                            <tr><td>CSS</td><td>88</td><td>85</td><td>87</td><td>A</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Attendance Section -->
            <div id="attendance" class="content-section">
                <h2 class="section-title">Attendance Overview</h2>
                <div class="chart-container">
                    <canvas id="attendanceChart"></canvas>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings" class="content-section">
                <h2 class="section-title">Settings</h2>
                <div class="settings-container">
                    <h3>Profile Information</h3>
                    <div class="profile-edit">
                        <img src="https://via.placeholder.com/150" alt="Profile" class="profile-pic-large" id="settingsProfilePic">
                        <div>
                            <label for="fileInput" class="logout-btn" style="background-color: #007bff; cursor: pointer;">Change Photo</label>
                            <input type="file" id="fileInput" style="display: none;" accept="image/*" onchange="loadProfileImage(event)">
                        </div>
                    </div>
                    <p><strong>Name:</strong> Student Name</p>
                    <p><strong>Email:</strong> student@example.com</p>

                    <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
                    <h3>Portal Customization</h3>
                    <div class="profile-edit">
                        <img src="/kle.jpg" alt="Portal Logo Preview" class="profile-pic-large" id="settingsPortalLogo" style="border-radius: 5px; object-fit: contain; background: #f8f9fa;">
                        <div>
                            <label for="logoInput" class="logout-btn" style="background-color: #6c757d; cursor: pointer;">Change Logo</label>
                            <input type="file" id="logoInput" style="display: none;" accept="image/*" onchange="loadPortalLogo(event)">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Course Details Section -->
            <div id="course-details" class="content-section">
                <button onclick="showSection('dashboard', document.querySelector('.nav-link.active'))" class="logout-btn" style="background:#6c757d; margin-bottom:20px; border:none; cursor:pointer;">&larr; Back to Dashboard</button>
                <div id="course-content-container"></div>
            </div>

        </div>
    </main>

    <script>
        function filterCourses() {
            const input = document.getElementById('courseSearch');
            const filter = input.value.toLowerCase();
            const cards = document.getElementsByClassName('course-card');

            for (let i = 0; i < cards.length; i++) {
                const cardText = cards[i].innerText.toLowerCase();
                if (cardText.includes(filter)) {
                    cards[i].style.display = "";
                } else {
                    cards[i].style.display = "none";
                }
            }
        }

        // Navigation Logic
        function showSection(sectionId, linkElement) {
            // Hide all sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => section.classList.remove('active'));

            // Show selected section
            document.getElementById(sectionId).classList.add('active');

            // Update active link
            const links = document.querySelectorAll('.nav-link');
            links.forEach(link => link.classList.remove('active'));
            linkElement.classList.add('active');

            // Render chart if attendance section is shown
            if (sectionId === 'attendance') {
                renderAttendanceChart();
            }

            // Fetch assignments when section is shown
            if (sectionId === 'assignments') {
                fetchAssignments();
            }
        }

        const courseData = {
            'python': { title: 'Python Programming', topics: ['Introduction to Python', 'Python Syntax', 'Variables and Data Types', 'Numbers and Casting', 'Strings and Formatting', 'Booleans and Operators', 'Lists and Tuples', 'Sets and Dictionaries', 'If...Else Conditions', 'While and For Loops', 'Functions and Lambda', 'Arrays', 'Classes and Objects', 'Inheritance', 'Iterators', 'Scope', 'Modules', 'Dates and Math', 'JSON Handling', 'RegEx and PIP'] },
            'c-programming': { title: 'C Programming', topics: ['Introduction to C', 'Syntax and Output', 'Comments and Variables', 'Data Types and Constants', 'Operators', 'Booleans', 'If...Else and Switch', 'Loops (While/For)', 'Break and Continue', 'Arrays', 'Strings', 'User Input', 'Memory Addresses', 'Pointers', 'Functions', 'Function Parameters', 'Recursion', 'Files Handling', 'Structures', 'Enums'] },
            'java': { title: 'Java Programming', topics: ['Java Introduction', 'Syntax and Output', 'Variables and Data Types', 'Type Casting', 'Operators', 'Strings', 'Math and Booleans', 'If...Else and Switch', 'While and For Loops', 'Break and Continue', 'Arrays', 'Methods', 'Method Parameters', 'Method Overloading', 'Scope and Recursion', 'OOP Concepts', 'Classes and Objects', 'Class Attributes', 'Class Methods', 'Constructors'] },
            'html': { title: 'HTML5', topics: ['HTML Introduction', 'Editors and Basic', 'Elements and Attributes', 'Headings and Paragraphs', 'Styles and Formatting', 'Quotations and Comments', 'Colors and CSS', 'Links and Images', 'Favicon and Page Title', 'Tables', 'Lists (UL/OL)', 'Block and Inline', 'Classes and IDs', 'Iframes', 'JavaScript in HTML', 'File Paths', 'Head Element', 'Layout', 'Responsive', 'Computercode'] },
            'css': { title: 'CSS3', topics: ['CSS Introduction', 'Syntax and Selectors', 'How To Add CSS', 'Comments and Colors', 'Backgrounds', 'Borders', 'Margins and Padding', 'Height and Width', 'Box Model', 'Outline', 'Text Formatting', 'Fonts and Icons', 'Links', 'Lists', 'Tables', 'Display and Max-width', 'Position', 'Z-index', 'Overflow', 'Float and Clear'] },
            'javascript': { title: 'JavaScript', topics: ['JS Introduction', 'Where To', 'Output', 'Statements', 'Syntax', 'Comments', 'Variables', 'Let and Const', 'Operators', 'Arithmetic', 'Assignment', 'Data Types', 'Functions', 'Objects', 'Events', 'Strings', 'String Methods', 'Numbers', 'Number Methods', 'Arrays'] },
            'data-structures': { title: 'Data Structures', topics: ['Intro to DSA', 'Arrays', 'Linked Lists', 'Stacks', 'Queues', 'Hash Tables', 'Trees', 'Heaps', 'Graphs', 'Algorithms Basics', 'Sorting Algorithms', 'Searching Algorithms', 'Recursion', 'Dynamic Programming', 'Greedy Algorithms', 'Backtracking', 'Bit Manipulation', 'Segment Trees', 'Tries', 'Disjoint Set Union'] },
            'databases': { title: 'Databases (SQL)', topics: ['Intro to Databases', 'RDBMS Concepts', 'SQL Syntax', 'Select Statement', 'Where Clause', 'AND, OR, NOT', 'Order By', 'Insert Into', 'Null Values', 'Update Statement', 'Delete Statement', 'Select Top', 'Min and Max', 'Count, Avg, Sum', 'Like Operator', 'Wildcards', 'In Operator', 'Between Operator', 'Aliases', 'Joins (Inner, Left, Right)'] },
            'operating-systems': { title: 'Operating Systems', topics: ['Introduction to OS', 'Process Management', 'Threads', 'CPU Scheduling', 'Process Synchronization', 'Deadlocks', 'Memory Management', 'Virtual Memory', 'File System Interface', 'File System Implementation', 'Mass-Storage Structure', 'I/O Systems', 'Protection', 'Security', 'Distributed Systems', 'Special-Purpose Systems', 'Linux System', 'Windows 10', 'Android', 'Virtual Machines'] },
            'computer-networks': { title: 'Computer Networks', topics: ['Introduction to Networks', 'Network Models (OSI)', 'TCP/IP Protocol Suite', 'Physical Layer', 'Data Link Layer', 'Network Layer', 'Transport Layer', 'Application Layer', 'Transmission Media', 'Switching', 'Error Detection/Correction', 'Data Link Control', 'MAC Sublayer', 'Wired LANs: Ethernet', 'Wireless LANs', 'Connecting Devices', 'Virtual LANs', 'Network Layer Protocols', 'Unicast Routing', 'Multicast Routing'] },
            'software-engineering': { title: 'Software Engineering', topics: ['Introduction to SE', 'Software Processes', 'Agile Software Development', 'Requirements Engineering', 'System Modeling', 'Architectural Design', 'Design and Implementation', 'Software Testing', 'Software Evolution', 'Dependability and Security', 'Sociotechnical Systems', 'Project Management', 'Project Planning', 'Quality Management', 'Configuration Management', 'Distributed SE', 'Service-oriented SE', 'Embedded Software', 'Aspect-oriented SE', 'Ethics in SE'] },
            'artificial-intelligence': { title: 'Artificial Intelligence', topics: ['Introduction to AI', 'Intelligent Agents', 'Problem Solving', 'Search Algorithms', 'Adversarial Search', 'Constraint Satisfaction', 'Logical Agents', 'First-Order Logic', 'Inference in FOL', 'Knowledge Representation', 'Planning', 'Planning in Real World', 'Uncertainty', 'Probabilistic Reasoning', 'Learning from Examples', 'Knowledge in Learning', 'Learning Probabilistic Models', 'Reinforcement Learning', 'Natural Language Processing', 'Robotics'] },
            'machine-learning': { title: 'Machine Learning', topics: ['Introduction to ML', 'Supervised Learning', 'Unsupervised Learning', 'Semi-supervised Learning', 'Reinforcement Learning', 'Linear Regression', 'Logistic Regression', 'Decision Trees', 'Support Vector Machines', 'Naive Bayes', 'K-Nearest Neighbors', 'K-Means Clustering', 'Principal Component Analysis', 'Gradient Descent', 'Neural Networks', 'Deep Learning', 'Model Evaluation', 'Feature Selection', 'Ensemble Methods', 'ML Applications'] },
            'web-development': { title: 'Web Development', topics: ['Web Dev Intro', 'HTML5 Advanced', 'CSS3 Advanced', 'JavaScript ES6+', 'DOM Manipulation', 'Responsive Web Design', 'Bootstrap Framework', 'Git and Version Control', 'React.js Basics', 'React Components', 'State Management', 'Node.js Basics', 'Express.js Framework', 'RESTful APIs', 'MongoDB Basics', 'SQL Databases', 'Authentication & Authorization', 'Deployment', 'Web Security', 'Performance Optimization'] }
        };

        function openCourse(courseKey) {
            const data = courseData[courseKey];
            if(!data) {
                console.error('Course data not found for:', courseKey);
                return;
            }
            
            let content = `
                <div style="background: linear-gradient(135deg, #007bff 0%, #6610f2 100%); padding: 40px; border-radius: 10px; color: white; margin-bottom: 30px; text-align: center;">
                    <h1 style="margin: 0; font-size: 2.5rem;">${data.title}</h1>
                    <p style="margin-top: 10px; font-size: 1.2rem; opacity: 0.9;">Comprehensive Course Material</p>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
            `;
            
            data.topics.forEach((topic, index) => {
                const pageNum = index + 1;
                content += `
                    <div style="background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border-top: 4px solid #28a745; transition: transform 0.2s;">
                        <h3 style="margin-top: 0; color: #333;">Page ${pageNum}: ${topic}</h3>
                        <img src="https://via.placeholder.com/400x200?text=${topic.replace(/ /g, '+')}" style="width: 100%; height: 150px; object-fit: cover; border-radius: 4px; margin: 10px 0;">
                        <p style="color: #666; font-size: 0.9rem;">
                            Detailed study material for <strong>${topic}</strong>. This section covers key concepts, examples, and practical exercises to master this specific topic within ${data.title}.
                        </p>
                        <button style="background: #007bff; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; margin-top: 10px;">Read More</button>
                    </div>
                `;
            });
            
            content += '</div>';
            
            document.getElementById('course-content-container').innerHTML = content;
            
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            // Show details
            document.getElementById('course-details').classList.add('active');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Profile Image Logic
        function loadProfileImage(event) {
            const image = document.getElementById('settingsProfilePic');
            const headerImage = document.getElementById('headerProfilePic');
            image.src = URL.createObjectURL(event.target.files[0]);
            headerImage.src = URL.createObjectURL(event.target.files[0]);
        }

        // Portal Logo Logic
        function loadPortalLogo(event) {
            const image = document.getElementById('settingsPortalLogo');
            const sidebarLogo = document.getElementById('sidebarLogo');
            const newSrc = URL.createObjectURL(event.target.files[0]);
            image.src = newSrc;
            sidebarLogo.src = newSrc;
        }

        // Chart Logic
        let attendanceChartInstance = null;
        function renderAttendanceChart() {
            if (attendanceChartInstance) return; // Prevent re-rendering
            
            const ctx = document.getElementById('attendanceChart').getContext('2d');
            attendanceChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Python', 'Java', 'C Programming', 'Databases', 'Networks'],
                    datasets: [{
                        label: 'Attendance %',
                        data: [85, 92, 78, 88, 95],
                        backgroundColor: ['#3776ab', '#007396', '#555', '#007bff', '#17a2b8'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    }
                }
            });
        }

        // Fetch Assignments Logic
        function fetchAssignments() {
            const list = document.getElementById('assignments-list');
            list.innerHTML = '';

            const assignments = [
                { title: 'Python Data Analysis Project', dueDate: 'Oct 25, 2023', course: 'Python', status: 'Pending' },
                { title: 'Memory Management & Pointers', dueDate: 'Oct 28, 2023', course: 'C Programming', status: 'Pending' },
                { title: 'OOP Concepts Implementation', dueDate: 'Nov 01, 2023', course: 'Java', status: 'Completed' },
                { title: 'Semantic HTML Structure', dueDate: 'Nov 03, 2023', course: 'HTML', status: 'Completed' },
                { title: 'Responsive Layout Design', dueDate: 'Nov 05, 2023', course: 'CSS', status: 'Pending' },
                { title: 'DOM Manipulation & Events', dueDate: 'Nov 08, 2023', course: 'JavaScript', status: 'Pending' },
                { title: 'Binary Search Tree Implementation', dueDate: 'Nov 12, 2023', course: 'Data Structures', status: 'Pending' },
                { title: 'SQL Queries & Joins', dueDate: 'Nov 15, 2023', course: 'Databases', status: 'Completed' },
                { title: 'Process Scheduling Algorithms', dueDate: 'Nov 18, 2023', course: 'Operating Systems', status: 'Pending' },
                { title: 'TCP/IP Protocol Analysis', dueDate: 'Nov 20, 2023', course: 'Computer Networks', status: 'Pending' },
                { title: 'Agile Methodology Case Study', dueDate: 'Nov 22, 2023', course: 'Software Engineering', status: 'Completed' },
                { title: 'A* Search Algorithm', dueDate: 'Nov 25, 2023', course: 'Artificial Intelligence', status: 'Pending' },
                { title: 'Linear Regression Model', dueDate: 'Nov 28, 2023', course: 'Machine Learning', status: 'Pending' },
                { title: 'Full Stack Application Prototype', dueDate: 'Nov 30, 2023', course: 'Web Development', status: 'Pending' }
            ];

            if (assignments.length === 0) {
                list.innerHTML = '<p>No assignments found.</p>';
                return;
            }

            assignments.forEach(assignment => {
                const statusClass = assignment.status === 'Completed' ? 'status-completed' : 'status-pending';
                const html = `
                    <div class="assignment-card">
                        <div>
                            <h3>${assignment.title}</h3>
                            <p>Due Date: ${assignment.dueDate} | Course: ${assignment.course}</p>
                        </div>
                        <span class="status-badge ${statusClass}">${assignment.status}</span>
                    </div>`;
                list.insertAdjacentHTML('beforeend', html);
            });
        }
    </script>
</body>

</html>